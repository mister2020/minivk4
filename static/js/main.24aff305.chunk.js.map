{"version":3,"sources":["App.js","index.js"],"names":["bridge","send","subscribe","e","console","log","supports","App","then","data","is_available","catch","error","useAdaptivity","viewWidth","React","useState","popout","id","completed","todos","stop_bit","styles","but","textAlign","align","title","marginTop","marginBottom","gr","margin","allOffTest","points","i","startBit","timerId","setInterval","a","clearInterval","activePanel","level","weight","style","disabled","after","onClick","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.24aff305.chunk.js","sourcesContent":["import React from \"react\"\r\nimport {\r\n  AdaptivityProvider,\r\n  ConfigProvider,\r\n  useAdaptivity,\r\n  AppRoot,\r\n  SplitLayout,\r\n  SplitCol,\r\n  ViewWidth,\r\n  View,\r\n  Panel,\r\n  PanelHeader,\r\n  Header,\r\n  Group,\r\n  SimpleCell,\r\n  withAdaptivity,\r\n  CellButton,\r\n  PopoutWrapper,\r\n  ModalDismissButton,\r\n  Button,\r\n  Div,\r\n  Title,\r\n  Cell,\r\n  Switch\r\n} from \"@vkontakte/vkui\";\r\nimport \"@vkontakte/vkui/dist/vkui.css\";\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport { ConsoleWriter } from \"istanbul-lib-report\";\r\n\r\nbridge.send(\"VKWebAppInit\"); \r\nbridge.subscribe((e) => console.log(e)); \r\nbridge.send(\"VKWebAppInit\", {});\r\nif (bridge.supports(\"VKWebAppResizeWindow\")) {\r\n    bridge.send(\"VKWebAppResizeWindow\", {\"width\": 800, \"height\": 1000});\r\n}\r\n\r\n\r\nfunction App() {\r\n\r\n  bridge\r\n  .send('VKWebAppFlashGetInfo')\r\n  .then(data => {\r\n    if (data.is_available === true) {\r\n      console.log('Supported.')\r\n    } else {\r\n      console.log('Not supported.')\r\n    }\r\n  })\r\n  .catch(error => {\r\n  });\r\n  \r\n  const { viewWidth } = useAdaptivity();\r\n  const [popout, setPopout] = React.useState(null);\r\n\r\n  const [todos] = React.useState([\r\n    {id: 1, completed: false},\r\n    {id: 2, completed: false},\r\n    {id: 3, completed: false},\r\n    {id: 4, completed: false},\r\n    {id: 5, completed: false},\r\n    {id: 6, completed: false},\r\n    {id: 7, completed: false},\r\n    {id: 8, completed: false}\r\n  ])\r\n\r\n  let have_on = false;\r\n  let all_off = true;\r\n  let stop_bit = false;\r\n\r\n    const styles = {\r\n      but: {\r\n        textAlign: 'center',\r\n        align: 'center'\r\n      },\r\n      title: {\r\n        marginTop: '5px',\r\n        marginBottom: '5px',\r\n        textAlign: 'center'\r\n      },\r\n      gr: {\r\n        margin: '0 auto 0 auto'\r\n      }\r\n    }\r\n\r\n    function haveOnTest () {\r\n      let points = 0;\r\n      let i = 0;\r\n      while (i < 8) {\r\n        if (todos[i].completed === true){\r\n          points += 1;\r\n        }\r\n        i++;\r\n      }\r\n      if (points > 0) return true;\r\n    }\r\n\r\n    function allOffTest () {\r\n      let points = 0;\r\n      let i = 0;\r\n      while (i < 8) {\r\n        if (todos[i].completed === false){\r\n          points += 1;\r\n        }\r\n        i++;\r\n      }\r\n      if (points === 8) return true;\r\n    }\r\n\r\n     function startBit () {\r\n       \r\n      stop_bit = false;\r\n      let i = 0;\r\n      let timerId = setInterval(async() => {\r\n        try{\r\n        if (stop_bit === true){\r\n          clearInterval(timerId)\r\n          console.log('STOPBIT')\r\n        }\r\n\r\n        \r\n        if (i === 0 && todos[0].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 1 && todos[1].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 2 && todos[2].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 3 && todos[3].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 4 && todos[4].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 5 && todos[5].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 6 && todos[6].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n        if (i === 7 && todos[7].completed === true){\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 1})\r\n        } else {\r\n          await bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": 0})\r\n        }\r\n\r\n\r\n        i++;\r\n        if (i === 8) {i = 0};\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n      }, 1000);\r\n    }\r\n\r\n\r\n    function button1 () {\r\n      if (todos[0].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[0].completed = true;\r\n      } else {\r\n        todos[0].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[0].completed)\r\n    }\r\n    function button2 () {\r\n      if (todos[1].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[1].completed = true;\r\n      } else {\r\n        todos[1].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[1].completed)\r\n    }\r\n    function button3 () {\r\n      if (todos[2].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[2].completed = true;\r\n      } else {\r\n        todos[2].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[2].completed)\r\n    }\r\n    function button4 () {\r\n      if (todos[3].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[3].completed = true;\r\n      } else {\r\n        todos[3].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[3].completed)\r\n    }\r\n    function button5 () {\r\n      if (todos[4].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[4].completed = true;\r\n      } else {\r\n        todos[4].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[4].completed)\r\n    }\r\n    function button6 () {\r\n      if (todos[5].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[5].completed = true;\r\n      } else {\r\n        todos[5].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[5].completed)\r\n    }\r\n    function button7 () {\r\n      if (todos[6].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[6].completed = true;\r\n      } else {\r\n        todos[6].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[6].completed)\r\n    }\r\n    function button8 () {\r\n      if (todos[7].completed === false) {\r\n        let res = allOffTest();\r\n        if (res === true) startBit();\r\n        todos[7].completed = true;\r\n      } else {\r\n        todos[7].completed = false;\r\n        let res = allOffTest();\r\n        if (res === true) stop_bit = true;\r\n      }\r\n      console.log(todos[7].completed)\r\n    }\r\n\r\n\r\n  //return\r\n  return (\r\n    <SplitLayout>\r\n      <SplitCol>\r\n    <View popout={popout} activePanel=\"popout\">\r\n      <Panel id=\"popout\" >\r\n      <Title level=\"1\" weight=\"bold\" style={styles.title}>Бит-фонарик</Title>\r\n        <Group style={styles.gr}>\r\n\r\n        <Cell disabled after={<Switch onClick={button1} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button2} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button3} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button4} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button5} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button6} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button7} />}></Cell>\r\n        <Cell disabled after={<Switch onClick={button8} />}></Cell>\r\n\r\n\r\n        </Group>\r\n      </Panel>\r\n    </View>\r\n    </SplitCol>\r\n    </SplitLayout>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport bridge from '@vkontakte/vk-bridge'\r\nimport App from './App';\r\nimport {\r\n  AdaptivityProvider,\r\n  ConfigProvider,\r\n  useAdaptivity,\r\n  AppRoot,\r\n  SplitLayout,\r\n  SplitCol,\r\n  ViewWidth,\r\n  View,\r\n  Panel,\r\n  PanelHeader,\r\n  Header,\r\n  Group,\r\n  SimpleCell\r\n} from \"@vkontakte/vkui\";\r\nimport \"@vkontakte/vkui/dist/vkui.css\";\r\n\r\nbridge.send(\"VKWebAppInit\");\r\nReactDOM.render(\r\n  <ConfigProvider>\r\n    <AdaptivityProvider>\r\n      <App />\r\n    </AdaptivityProvider>\r\n  </ConfigProvider>,\r\n  document.getElementById(\"root\")\r\n);"],"sourceRoot":""}